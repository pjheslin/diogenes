<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <link rel="stylesheet" type="text/css" href="find.css" />
    <title>Find in Page</title>
  </head>
  <body>
    <div class="find-body">
      <form>
        <input id="textToFind" size="30" type="text" name="find" value="" placeholder="Find in page" autofocus />
        <button id="chevron-down" onclick="next()"></button><button id="chevron-up" onclick="prev()"></button><a id="close-button" onclick="cancel()">
        <svg width="12px" height="12px" viewPort="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <line x1="1" y1="11"
                x2="11" y2="1"
                stroke="black"
                stroke-width="2"/>
          <line x1="1" y1="1"
                x2="11" y2="11"
                stroke="black"
                stroke-width="2"/>
        </svg></a>
      </form>
      </div>
      <script>

document.addEventListener('keydown', event => {
    if (event.key === 'Escape' || event.keyCode === 27) {
        cancel()
    }
    else if (event.key === "Enter" || event.keyCode === 13) {
        event.preventDefault()
        next()
    }
    else {

    }
})

function sendFindRequest (string, direction) {
    window.electron.findText(string, direction)
}

function cancel() {
    sendFindRequest("", "")
    this.close()
}

function next() {
    event.preventDefault()
    sendFindRequest(document.getElementById("textToFind").value, "next")
}

function prev() {
    event.preventDefault()
    sendFindRequest(document.getElementById("textToFind").value, "prev")
}

</script>
  </body>
</html>
